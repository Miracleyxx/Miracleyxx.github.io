{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/shoka/source/css/comment.styl","path":"css/comment.styl","modified":0,"renderable":1},{"_id":"themes/shoka/source/css/app.styl","path":"css/app.styl","modified":0,"renderable":1},{"_id":"themes/shoka/source/css/mermaid.styl","path":"css/mermaid.styl","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/404.png","path":"images/404.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/alipay.png","path":"images/alipay.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/failure.ico","path":"images/failure.ico","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/favicon.ico","path":"images/favicon.ico","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/play_disc.png","path":"images/play_disc.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/search.png","path":"images/search.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/play_needle.png","path":"images/play_needle.png","modified":0,"renderable":1},{"_id":"themes/shoka/source/images/wechatpay.png","path":"images/wechatpay.png","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/rtsp解析.md","hash":"450df5201c54bcddf2fa3db93908eba188abaaf3","modified":1669617702768},{"_id":"source/_posts/月亮与六便士.md","hash":"c363d67d06f675e8b705c225beaf69d2af70bc1d","modified":1669345719739},{"_id":"source/_posts/rtsp解析/rtsp.png","hash":"533baa1c6c2a74f95bf656f7e810b9ce032c6736","modified":1669616342233},{"_id":"source/_posts/rtsp解析/setup.png","hash":"3513c0f9924740aab066ffbf7d19c638396acd32","modified":1669616371508},{"_id":"themes/shoka/.editorconfig","hash":"57f50fc69fdc98a28c9bb04c338865a8b267b4bc","modified":1669344714848},{"_id":"themes/shoka/LICENSE","hash":"1a301f54567fbcd67fc138c37071b96ac9e670a1","modified":1669344714849},{"_id":"themes/shoka/README.md","hash":"162ec0ffef6a69e09c9b00dbc9a8f400b3826fac","modified":1669344714849},{"_id":"themes/shoka/_config.yml","hash":"21789f3225ec0631cc90faa284a22863ff411530","modified":1669619869056},{"_id":"themes/shoka/_images.yml","hash":"bca089255d50638a65fe91b58cd94aff42d9f49c","modified":1669344714849},{"_id":"themes/shoka/package.json","hash":"78e368a218a687a4a0d1936fc723e2e6fca2bdfb","modified":1669344714879},{"_id":"themes/shoka/example/_config.shoka.yml","hash":"ab07b1fd050e985e120d0e1797c588c721ac1772","modified":1669344714850},{"_id":"themes/shoka/example/_config.yml","hash":"a6596f241cd5d2e970c025cf927d54ed226e9ec0","modified":1669344714850},{"_id":"themes/shoka/example/package.json","hash":"4744a2d23b4558be8932df77989c2ba133f0388e","modified":1669344714850},{"_id":"themes/shoka/languages/README.md","hash":"d40601b23836327a36b0d75361f57e95413c50b3","modified":1669344714869},{"_id":"themes/shoka/languages/default.yml","hash":"da38f00bb45a318f118db0d74df24a137351777e","modified":1669344714870},{"_id":"themes/shoka/languages/en.yml","hash":"41fb069ee781a9b36be8257627a0f5bd9479cf7f","modified":1669344714870},{"_id":"themes/shoka/languages/ja.yml","hash":"579f9e79003eb37a9c68346db0961bff4d9f6a03","modified":1669344714870},{"_id":"themes/shoka/languages/zh-HK.yml","hash":"85a4b1ecd3a36b2e92ebe923495aab1682359e3c","modified":1669344714871},{"_id":"themes/shoka/languages/zh-CN.yml","hash":"d2cac0184e803ec1947187b23979e24065184ad4","modified":1669344714870},{"_id":"themes/shoka/languages/zh-TW.yml","hash":"060f1886301e9c13241b63c2b5983ebc9f35acaa","modified":1669344714871},{"_id":"themes/shoka/layout/category.njk","hash":"11a604e3285262d34368b1eb1bf6ff8349c3345f","modified":1669344714878},{"_id":"themes/shoka/layout/archive.njk","hash":"01847f527849426aab8fcad795597a7076d761fd","modified":1669344714878},{"_id":"themes/shoka/layout/page.njk","hash":"2dac7be8699c8ad6364831eac2ab0167dba7c689","modified":1669344714878},{"_id":"themes/shoka/layout/index.njk","hash":"561b703a552bf6afaa76a128945a1cc26df3f865","modified":1669344714878},{"_id":"themes/shoka/layout/post.njk","hash":"7213742682ed6c759f6078809b404401ea1784c0","modified":1669344714878},{"_id":"themes/shoka/layout/tag.njk","hash":"f1e9539c178db724961e04bcc08fa94279aae4b1","modified":1669344714879},{"_id":"themes/shoka/layout/_alternate/atom.ejs","hash":"4b40589945713ab19eea69902b0768fc69ec1027","modified":1669344714871},{"_id":"themes/shoka/layout/_alternate/json.ejs","hash":"74975fb6d1ca1099cd843c180ce49353b2061c53","modified":1669344714872},{"_id":"themes/shoka/layout/_alternate/rss.ejs","hash":"bd8df7a85959df3231b0bb617d7b5d05a98c48de","modified":1669344714872},{"_id":"themes/shoka/layout/_macro/breadcrumb.njk","hash":"1dc8ee1de2c20d514c251145d00536d9b0170335","modified":1669344714872},{"_id":"themes/shoka/layout/_macro/card.njk","hash":"0dfd6a2e21119131566f03d7bebedda15d4261b0","modified":1669344714872},{"_id":"themes/shoka/layout/_macro/comment.njk","hash":"fc91ceb0b2c86a38839cef84f50487f119367cd7","modified":1669344714872},{"_id":"themes/shoka/layout/_macro/segment.njk","hash":"c8e21eeea552c7c685e50252d1983785edc6a29a","modified":1669344714873},{"_id":"themes/shoka/layout/_macro/sidebar.njk","hash":"7f170b2649f09e88933de4121803990baf5d4022","modified":1669344714873},{"_id":"themes/shoka/layout/_macro/postmeta.njk","hash":"11e73da9e907e20ea81b920c47265e88fb5d210c","modified":1669344714873},{"_id":"themes/shoka/layout/_macro/widgets.njk","hash":"1045129c1163e603e9a927161417354758602737","modified":1669344714873},{"_id":"themes/shoka/layout/_partials/footer.njk","hash":"4aabeeac4cec09a868aed39282c9d3b3a23e38ba","modified":1669344714874},{"_id":"themes/shoka/layout/_partials/layout.njk","hash":"322cd6927edccbd47eafb63097181ad115a9a4d5","modified":1669344714875},{"_id":"themes/shoka/layout/_partials/header.njk","hash":"370b4ae76844b6659ad4dc506a37d6ac9bcead20","modified":1669344714874},{"_id":"themes/shoka/layout/_partials/pagination.njk","hash":"676ef88ab76d735696f6e8c04338eb3887fb63cc","modified":1669344714875},{"_id":"themes/shoka/scripts/filters/locals.js","hash":"63ada9722d96f021f1cd398bbe7bb4991dde1231","modified":1669344714882},{"_id":"themes/shoka/scripts/filters/post.js","hash":"44069b5007b3a692eba70dd9354fc0f4dd27d5ed","modified":1669344714882},{"_id":"themes/shoka/scripts/generaters/archive.js","hash":"a6f87b628f6125cc2614f7214e2ef2995a084663","modified":1669344714882},{"_id":"themes/shoka/scripts/generaters/config.js","hash":"8b9aebab15e192f3a5bc2539ce3aeaddbee98be8","modified":1669344714882},{"_id":"themes/shoka/scripts/generaters/images.js","hash":"fcf3d1802c4bb5ff6f2683987f048371e2d00488","modified":1669344714883},{"_id":"themes/shoka/scripts/generaters/pages.js","hash":"dd8bb4adec63efa8efc282febd4da989e1523262","modified":1669344714883},{"_id":"themes/shoka/scripts/generaters/index.js","hash":"27b52046c1452b8cb7ca1f64f1eff3d8ad4b0ab6","modified":1669344714883},{"_id":"themes/shoka/scripts/generaters/script.js","hash":"243e11786081d8d7d5d3b52338925a71c8da8e2c","modified":1669344714883},{"_id":"themes/shoka/scripts/helpers/asset.js","hash":"df236860cd91a1c6ffc78ffb4156730d6a59c5d1","modified":1669344714883},{"_id":"themes/shoka/scripts/helpers/engine.js","hash":"02bdf84317ddb775cbb5fcdb9ad70c1cb5631ffd","modified":1669344714884},{"_id":"themes/shoka/scripts/helpers/list_categories.js","hash":"84507e35a428179bd5838fe80d527a9433916391","modified":1669344714884},{"_id":"themes/shoka/scripts/renderer/njk.js","hash":"480f25325494e4caa04794cd496912f628ae2691","modified":1669344714884},{"_id":"themes/shoka/scripts/tags/links.js","hash":"ac5844307e62693a9add08b89d9ec4d6aa5bc25e","modified":1669344714885},{"_id":"themes/shoka/scripts/tags/media.js","hash":"a0f66450f48a1ce0f6c532e687fc3ee85aeed175","modified":1669344714885},{"_id":"themes/shoka/source/css/_colors.styl","hash":"6cb23f12441e7517cc614336d867cfa2f35284d7","modified":1669344714885},{"_id":"themes/shoka/source/css/_iconfont.styl","hash":"05117f95a16e5f7c08351492752994c03f185911","modified":1669344714904},{"_id":"themes/shoka/source/css/_mixins.styl","hash":"68c4bfee20cc6ee477548ce3e4e28e19697d8af3","modified":1669344714905},{"_id":"themes/shoka/source/css/_variables.styl","hash":"c939f1af34a0a8a6a37e6439a8b609a26c9e09d2","modified":1669344714905},{"_id":"themes/shoka/source/css/comment.styl","hash":"7502a76342c8d84e4a476b35a91fcec22a15cbed","modified":1669344714905},{"_id":"themes/shoka/source/css/app.styl","hash":"572d20c4c574b87a2fc49290206c90c8baa7133d","modified":1669344714905},{"_id":"themes/shoka/source/css/mermaid.styl","hash":"ec821a3f997691b92b0926ba4534c94a795ef587","modified":1669344714905},{"_id":"themes/shoka/source/images/404.png","hash":"b7b18f6689d0a14041d87bab6c4e4ce567249d01","modified":1669344714906},{"_id":"themes/shoka/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1669344714906},{"_id":"themes/shoka/source/images/apple-touch-icon.png","hash":"d4e5d65ff663cb71f43515e68d757cbae1ceb3ec","modified":1669344714907},{"_id":"themes/shoka/source/images/avatar.jpg","hash":"93af0fd2ee6322c5c77760eefba6c81afa2e313e","modified":1669344714907},{"_id":"themes/shoka/source/images/failure.ico","hash":"5eec5c163400d8ece74286da49130da1ead3f6f6","modified":1669344714907},{"_id":"themes/shoka/source/images/favicon.ico","hash":"8ae48d9e33b7593cd005aae88b755aa9ce129f0e","modified":1669344714908},{"_id":"themes/shoka/source/images/logo.svg","hash":"830dfbd6dff2986130819f747b25db230b05ca84","modified":1669344714908},{"_id":"themes/shoka/source/images/play_disc.png","hash":"3cfa8dd2e12424c52d1f5e34e9502e446fecde9c","modified":1669344714909},{"_id":"themes/shoka/source/images/search.png","hash":"08c4f6a7a92eff3548aec94b267a23a25e6bd215","modified":1669344714909},{"_id":"themes/shoka/source/images/play_needle.png","hash":"e0998828ab50ce37617f9f4d46b74648206ac852","modified":1669344714909},{"_id":"themes/shoka/example/source/_data/colors.styl","hash":"00b06d9366f6a477d02e94eea16bd07aafb7ff2f","modified":1669344714851},{"_id":"themes/shoka/example/source/_data/custom.styl","hash":"d90bc10047d824d73d4f0ba10f81dfe1628558a0","modified":1669344714851},{"_id":"themes/shoka/example/source/_data/iconfont.styl","hash":"b3c284f5bf48ae84d4f016779cf43b67c87e0b87","modified":1669344714851},{"_id":"themes/shoka/example/source/_data/images.yml","hash":"bca089255d50638a65fe91b58cd94aff42d9f49c","modified":1669344714851},{"_id":"themes/shoka/example/source/_data/languages.yml","hash":"79b49c2d38c14e29274ebf461fbb3f83ea018fbb","modified":1669344714851},{"_id":"themes/shoka/example/source/friends/_data.yml","hash":"1b090bd2f25f4d00471f31c4136141d4ad1ae19a","modified":1669344714869},{"_id":"themes/shoka/example/source/friends/index.md","hash":"c44fdf47aae95588c686a15fa2046ab9a4c09b9b","modified":1669344714869},{"_id":"themes/shoka/example/source/_posts/categories.md","hash":"c1ca20b94100a77efc569f43986951a2551f6b64","modified":1669344714852},{"_id":"themes/shoka/example/source/_posts/code-highlight.md","hash":"607f8cf393ad1082398c7f5246e229405bda4de3","modified":1669344714852},{"_id":"themes/shoka/example/source/_posts/elements.md","hash":"66dde9f7cef1c9a90a15776b633c8ab4272ed826","modified":1669344714856},{"_id":"themes/shoka/example/source/_posts/excerpts.md","hash":"9f51babe45d9f45a04d1e6c52eb8a96b58478029","modified":1669344714856},{"_id":"themes/shoka/example/source/_posts/gallery-post.md","hash":"ae577f5171f0354fb0a3702da5bb8ba14372dc28","modified":1669344714856},{"_id":"themes/shoka/example/source/_posts/hello-world.md","hash":"ceb583413b760182a3c2463bf7f15c03328a37bc","modified":1669344714856},{"_id":"themes/shoka/example/source/_posts/images.md","hash":"f09b4339b8334584ec311be7e2a2e7e839bcfa04","modified":1669344714857},{"_id":"themes/shoka/example/source/_posts/link-post-without-title.md","hash":"811e7ec6f4ed747388e8255b27e482d04b304c51","modified":1669344714857},{"_id":"themes/shoka/example/source/_posts/link-post.md","hash":"ac9a280178ba63ccc3acc7540aa96db4d08b5b21","modified":1669344714857},{"_id":"themes/shoka/example/source/_posts/long-title.md","hash":"e11f04c88e453b6b265d634458a69d0124edc684","modified":1669344714857},{"_id":"themes/shoka/example/source/_posts/markdown.md","hash":"7b03cdab8abff7010603ad0e66ef611564e08694","modified":1669344714858},{"_id":"themes/shoka/example/source/_posts/no-title.md","hash":"24536a15b2a9633d0a4dfad66c0ab51a683d78b5","modified":1669344714858},{"_id":"themes/shoka/example/source/_posts/tag-plugins.md","hash":"35e8c2ca9e48d5653f8d69ef05a0221c1b207e4e","modified":1669344714858},{"_id":"themes/shoka/example/source/_posts/tags.md","hash":"788411e01f179f65bc6ea61c73601a0a4a1072d0","modified":1669344714858},{"_id":"themes/shoka/example/source/_posts/videos.md","hash":"32735a9b9f0370d49e0f4311c8bc1fbcfba98445","modified":1669344714859},{"_id":"themes/shoka/example/source/_posts/中文測試.md","hash":"0dd7c0e2e2242939b69dd6d66fe28f56b69ff65a","modified":1669344714859},{"_id":"themes/shoka/example/source/_posts/日本語テスト.md","hash":"5ae9b45f038baa96bd179b4ad0b03409e9a76bdb","modified":1669344714859},{"_id":"themes/shoka/layout/_partials/head/head.njk","hash":"91acf8eae82afe770d6f174a37c12b9617b0d97c","modified":1669344714874},{"_id":"themes/shoka/layout/_partials/head/head_unique.njk","hash":"afb09eeda0de5dd4df67ba80b58b9ace9eaf5e0d","modified":1669344714874},{"_id":"themes/shoka/layout/_partials/post/copyright.njk","hash":"b6aa82c28683bdb337920db718841bee207dc2d9","modified":1669344714875},{"_id":"themes/shoka/layout/_partials/post/nav.njk","hash":"01e49cc56aa8722f0eb2739ce2e55080429e576e","modified":1669344714875},{"_id":"themes/shoka/layout/_partials/post/footer.njk","hash":"8e7cae0c45bbc2cf3e91eac10ab319caa6b27d2e","modified":1669344714875},{"_id":"themes/shoka/layout/_partials/post/reward.njk","hash":"f7185a561288a754beae1323a19c200b99dccd08","modified":1669344714876},{"_id":"themes/shoka/layout/_partials/post/post.njk","hash":"e1846d51aca86c873f1c74152b80d50eec79507b","modified":1669344714876},{"_id":"themes/shoka/layout/_partials/sidebar/menu.njk","hash":"14192d78b637ca07ec4a0505268bfaecca2f0680","modified":1669344714876},{"_id":"themes/shoka/layout/_partials/sidebar/overview.njk","hash":"3c12aa376662f15366177792a35873f2344152b8","modified":1669344714877},{"_id":"themes/shoka/layout/_partials/third-party/baidu-analytics.njk","hash":"9f4568ede657e6844fe54e3cdf9635ecd94b2bf9","modified":1669344714877},{"_id":"themes/shoka/source/js/_app/dom.js","hash":"1bd152fc94f33793e71cada5ec8bbfd71e531d6c","modified":1669344714910},{"_id":"themes/shoka/source/js/_app/fireworks.js","hash":"e4bf5a9955618bb43020e175e59e497b28c78131","modified":1669344714910},{"_id":"themes/shoka/source/js/_app/global.js","hash":"a792824837bcf9cb90ec2c831dea2dc4de85cbf1","modified":1669344714911},{"_id":"themes/shoka/source/js/_app/page.js","hash":"d8a51bdd02bc839290df4ea9708a3e1cf39a823a","modified":1669344714911},{"_id":"themes/shoka/source/js/_app/pjax.js","hash":"0528d97ad162eb9f70e21540d993d48e6027ba2d","modified":1669344714911},{"_id":"themes/shoka/source/js/_app/player.js","hash":"d49cc563b239659d554c838f784af8244023f886","modified":1669344714912},{"_id":"themes/shoka/source/js/_app/utils.js","hash":"6e123d054bf003deb4fc5eb80cfec233e4941851","modified":1669344714912},{"_id":"themes/shoka/source/js/_app/sidebar.js","hash":"1d532138431e98e28f7579a52b0e88909aba76e0","modified":1669344714912},{"_id":"themes/shoka/source/css/_common/components/components.styl","hash":"3677ba4471475026d232e3af00d5e6de027151e6","modified":1669344714886},{"_id":"themes/shoka/source/css/_common/outline/mobile.styl","hash":"15c7be9e4e1b3c6b55e7beef5685898ae4f846ab","modified":1669344714899},{"_id":"themes/shoka/source/css/_common/outline/outline.styl","hash":"e107c799b88278db84a2d5a8819d17f48511f73e","modified":1669344714899},{"_id":"themes/shoka/source/css/_common/scaffolding/animate.styl","hash":"dda625de5efb0e5b53e81c9da053850e9767da22","modified":1669344714902},{"_id":"themes/shoka/source/css/_common/scaffolding/base.styl","hash":"415635fa6f145a53a10fa7f0b72247747530f9e7","modified":1669344714902},{"_id":"themes/shoka/source/css/_common/scaffolding/buttons.styl","hash":"555c4b09c9970931e73abe544ae6356cf870670e","modified":1669344714902},{"_id":"themes/shoka/source/css/_common/scaffolding/divider.styl","hash":"faa2e60cafdb0379f66a9ff7f9bd8e4d53551882","modified":1669344714902},{"_id":"themes/shoka/source/css/_common/scaffolding/iconfont.styl","hash":"b3c284f5bf48ae84d4f016779cf43b67c87e0b87","modified":1669344714902},{"_id":"themes/shoka/source/css/_common/scaffolding/normalize.styl","hash":"eea39861e6cb0cdc0e26d2f7878c2059991d3d40","modified":1669344714903},{"_id":"themes/shoka/source/css/_common/scaffolding/pagination.styl","hash":"80bb3542fb6c7245f9f559c97938a65d29a61784","modified":1669344714903},{"_id":"themes/shoka/source/css/_common/scaffolding/ribbon.styl","hash":"e9c99fbd15cb9b118091d6e9add6aaf2abd8ab7d","modified":1669344714903},{"_id":"themes/shoka/source/css/_common/scaffolding/scaffolding.styl","hash":"14295140c2e5e50545a9b8404839589d486d78c9","modified":1669344714903},{"_id":"themes/shoka/source/css/_common/scaffolding/scrollbar.styl","hash":"f34503ae1dce5bfc964d52f3f22601058fc7a907","modified":1669344714903},{"_id":"themes/shoka/source/css/_common/scaffolding/tables.styl","hash":"a67472f2b36047f5f1c2d85e398afe5003e06087","modified":1669344714904},{"_id":"themes/shoka/source/css/_common/scaffolding/tip.styl","hash":"ffdfdc91b9d29060a36bfdf92b746596fd05afd9","modified":1669344714904},{"_id":"themes/shoka/source/css/_common/scaffolding/toggles.styl","hash":"a71d609401001c9b15608d5276636180d49cf844","modified":1669344714904},{"_id":"themes/shoka/example/source/_posts/computer-science/note/cover.jpg","hash":"6d077a7330284d0fb2b79e96d7e5b56121395df3","modified":1669344714854},{"_id":"themes/shoka/example/source/_posts/computer-science/note/theme-shoka-doc.md","hash":"cd2c1d52df850bd7e8cc130bfb19ae6a5fc97f25","modified":1669344714854},{"_id":"themes/shoka/source/css/_common/components/highlight/highlight.styl","hash":"18be598f5f1d75cb4869adcd1ae47bd19456b2c5","modified":1669344714886},{"_id":"themes/shoka/source/css/_common/components/highlight/operation.styl","hash":"f2ac0660d8f9e4d4582a4a8c4f97bd6d80162a6d","modified":1669344714886},{"_id":"themes/shoka/source/css/_common/components/pages/collapse.styl","hash":"a0ecc9afe8c03eae06075fc53c39057e05d22b1e","modified":1669344714887},{"_id":"themes/shoka/source/css/_common/components/pages/home.styl","hash":"95ad71e89df31b58e9db37b4b0c092f2102f91b2","modified":1669344714887},{"_id":"themes/shoka/source/css/_common/components/pages/tag-cloud.styl","hash":"2ebc481064dae0b593e8caff838044f92a5e2ef7","modified":1669344714888},{"_id":"themes/shoka/source/css/_common/components/pages/pages.styl","hash":"e2af0d359247a82dab6f8d6ce90d6b0d5fca4dc9","modified":1669344714887},{"_id":"themes/shoka/source/css/_common/components/post/breadcrumb.styl","hash":"43f7a0d6c7f7bde6a4e521acb67a5b0543a12b77","modified":1669344714888},{"_id":"themes/shoka/source/css/_common/components/post/copyright.styl","hash":"0a3991a291b53301c6a3f5a86532ea75b8acf355","modified":1669344714888},{"_id":"themes/shoka/source/css/_common/components/post/expand.styl","hash":"ecd24e46405f6e2f08394d7e1e65c86b9294642f","modified":1669344714888},{"_id":"themes/shoka/source/css/_common/components/post/footer.styl","hash":"256f45905d0d1b17d74b6cbfebdc5ef7a107ed83","modified":1669344714889},{"_id":"themes/shoka/source/css/_common/components/post/header.styl","hash":"b1b13db6e10a9b46fbd052dc4db1aa1cfb97ab97","modified":1669344714889},{"_id":"themes/shoka/source/css/_common/components/post/nav.styl","hash":"7c8f1bf2c755b8c3d1a41eaf1aa6f59d3c23a4a2","modified":1669344714889},{"_id":"themes/shoka/source/css/_common/components/post/post.styl","hash":"510d1f7457c2191f8a7bd84ce79cc3c0aade44a8","modified":1669344714889},{"_id":"themes/shoka/source/css/_common/components/post/rtl.styl","hash":"4a431ec0b382ae6693f1aee54599da18eddc6a59","modified":1669344714890},{"_id":"themes/shoka/source/css/_common/components/post/reward.styl","hash":"897a0a0e37ed23ef8ca6c644b3794cf8c32f1650","modified":1669344714890},{"_id":"themes/shoka/source/css/_common/components/post/tags.styl","hash":"e3348bf77b141068b91181655945277d6270312b","modified":1669344714890},{"_id":"themes/shoka/source/css/_common/components/tags/collapse.styl","hash":"aa663a0fcee4138be9a3272172cd30b8118261df","modified":1669344714890},{"_id":"themes/shoka/source/css/_common/components/tags/container.styl","hash":"541d71873e36373b671a7cec61ac10db48413d9f","modified":1669344714891},{"_id":"themes/shoka/source/css/_common/components/tags/label.styl","hash":"dff26da9be9a7304780941b95d144d03e6b7b19b","modified":1669344714891},{"_id":"themes/shoka/source/css/_common/components/tags/list.styl","hash":"53ceac76fcaa1353cae910e80449810be0cc4254","modified":1669344714891},{"_id":"themes/shoka/source/css/_common/components/tags/links.styl","hash":"2732062ecaf3a5fec24442bf2fc25de7f4279ff9","modified":1669344714891},{"_id":"themes/shoka/source/css/_common/components/tags/note.styl","hash":"0eb5410344a0e4506b641689d6835ea8929553e8","modified":1669344714892},{"_id":"themes/shoka/source/css/_common/components/tags/player.styl","hash":"f182dad19b6cc575a1631713a00fd7f0d4516c19","modified":1669344714892},{"_id":"themes/shoka/source/css/_common/components/tags/quiz.styl","hash":"cc0fbb250fdf00887c043e41f0cb777f4f46f992","modified":1669344714892},{"_id":"themes/shoka/source/css/_common/components/tags/tags.styl","hash":"b353f2dfc373508d0e0c798bd22107f63591054f","modified":1669344714893},{"_id":"themes/shoka/source/css/_common/components/tags/tabs.styl","hash":"950cb00307208fbb332119796c4a1ac850f19941","modified":1669344714893},{"_id":"themes/shoka/source/css/_common/components/third-party/loading.styl","hash":"dc513c323ac3555a94e96809d57d09bc4d65fc2b","modified":1669344714893},{"_id":"themes/shoka/source/css/_common/components/third-party/pace.styl","hash":"c93cb3a4715394f8a35db9bb65e03aea8bda45da","modified":1669344714896},{"_id":"themes/shoka/source/css/_common/components/third-party/search.styl","hash":"33b29d3782f058f2b8b89deb3f738fda2517ca4c","modified":1669344714896},{"_id":"themes/shoka/source/css/_common/components/third-party/theme.styl","hash":"2d112448cc435b58c57ebd9b31e016e6ae8af5d0","modified":1669344714896},{"_id":"themes/shoka/source/css/_common/components/third-party/third-party.styl","hash":"68ee764bfb8bb0bb478cd41c78895dd341600d26","modified":1669344714896},{"_id":"themes/shoka/source/css/_common/components/third-party/valine.styl","hash":"59c69ea7817c0348872f865d406b9650814279ce","modified":1669344714896},{"_id":"themes/shoka/source/css/_common/components/third-party/widgets.styl","hash":"71fe298ba9de676ebc3c00febe10784aa7dc119a","modified":1669344714897},{"_id":"themes/shoka/source/css/_common/outline/header/brand.styl","hash":"6335d84443326d19fff8e17f364d4cace8f19445","modified":1669344714897},{"_id":"themes/shoka/source/css/_common/outline/footer/footer.styl","hash":"66592076afe7b86b7962aac5451e0b5248d7172e","modified":1669344714897},{"_id":"themes/shoka/source/css/_common/outline/header/header.styl","hash":"ca7f94ebb0f3090405aab79889b81d4e708a6ab6","modified":1669344714898},{"_id":"themes/shoka/source/css/_common/outline/header/image.styl","hash":"0777d91cbc7e228426c46ee97627a32054526013","modified":1669344714898},{"_id":"themes/shoka/source/css/_common/outline/header/menu.styl","hash":"3b309ade55860b4d8c693b336a33e470436a32b7","modified":1669344714898},{"_id":"themes/shoka/source/css/_common/outline/header/nav.styl","hash":"b267a98cfee639dad82e0889b29ac5bee2634ab6","modified":1669344714898},{"_id":"themes/shoka/source/css/_common/outline/header/right.styl","hash":"d9a7f9923ea7ad2b3aeda9ce7140697f9d094054","modified":1669344714898},{"_id":"themes/shoka/source/css/_common/outline/header/tool.styl","hash":"1fa043670ba8cc2a4c86081e5dd88e9ed4b1f978","modified":1669344714899},{"_id":"themes/shoka/source/css/_common/outline/header/waves.styl","hash":"f9e6ae9e36429568c0323a112f39d6ea2baaefd6","modified":1669344714899},{"_id":"themes/shoka/source/css/_common/outline/sidebar/dimmer.styl","hash":"66f159f21cafe1dc71570f7018678a0a3862c175","modified":1669344714900},{"_id":"themes/shoka/source/css/_common/outline/sidebar/author.styl","hash":"a09b34b35d31a4b8e275bfbb92efa48fe6608d2f","modified":1669344714900},{"_id":"themes/shoka/source/css/_common/outline/sidebar/menu.styl","hash":"46df47361148673e6c2ce114b4f498be63c0e4ab","modified":1669344714900},{"_id":"themes/shoka/source/css/_common/outline/sidebar/related.styl","hash":"e300d2ec33fb7bfbc9310578b8891eb6cd137e86","modified":1669344714900},{"_id":"themes/shoka/source/css/_common/outline/sidebar/quick.styl","hash":"01b34ce24ad3dde1147c8f3a6babd70e3d45b461","modified":1669344714900},{"_id":"themes/shoka/source/css/_common/outline/sidebar/sidebar.styl","hash":"6a1a13ecc6de3ceba1957f95aa852d440abaae9b","modified":1669344714901},{"_id":"themes/shoka/source/css/_common/outline/sidebar/social.styl","hash":"33f6459f44e15ef3320e3b208e5345ff1d0cee5f","modified":1669344714901},{"_id":"themes/shoka/source/css/_common/outline/sidebar/state.styl","hash":"c2eaaba4c35df5253ae236318b5e6f76861d37f8","modified":1669344714901},{"_id":"themes/shoka/source/css/_common/outline/sidebar/tab.styl","hash":"b6f604f7293230d0113dabe5deeb61b809fdf035","modified":1669344714901},{"_id":"themes/shoka/source/css/_common/outline/sidebar/toc.styl","hash":"5836be92d4d153bd44ff86fe05e0ce83b11ae569","modified":1669344714901},{"_id":"themes/shoka/example/source/_posts/computer-science/java/course-1/cover.jpg","hash":"57341ddf90eeb71d0b9a3fef8cf1f094f9c299b3","modified":1669344714853},{"_id":"themes/shoka/example/source/_posts/computer-science/java/course-1/week-1.md","hash":"8284465659be7a4b7568244264bc236c01a6d1cb","modified":1669344714853},{"_id":"themes/shoka/example/source/_posts/computer-science/java/course-1/week-2.md","hash":"5efffda6c8abc24a1d4671c54928cfe7fb838ce5","modified":1669344714853},{"_id":"themes/shoka/example/source/_posts/computer-science/note/theme-shoka-doc/config.md","hash":"19c4015857b6953da18628967b7a0b84e624a43d","modified":1669344714855},{"_id":"themes/shoka/example/source/_posts/computer-science/note/theme-shoka-doc/dependents.md","hash":"5048e40092f39f776060e083c822698e5842a3ea","modified":1669344714855},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/class.styl","hash":"0d9b0d1d2ecf981b881e9416fc770d47f679a50f","modified":1669344714894},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/flowchart.styl","hash":"83296761c85b8e82d0757b1a4792a74d50509d2d","modified":1669344714894},{"_id":"themes/shoka/example/source/_posts/computer-science/note/theme-shoka-doc/special.md","hash":"3c0c0bf6b7cd1ab3c12e0d097330937a2803ed10","modified":1669344714855},{"_id":"themes/shoka/example/source/_posts/computer-science/note/theme-shoka-doc/display.md","hash":"fce410e8e5756ea256c6a23ee688455bb8d51e93","modified":1669344714855},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/gantt.styl","hash":"bae6617a32026891f510483aa6d25c70a82c5945","modified":1669344714894},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/git.styl","hash":"a7e5f3bb9378b1a4fb0f710e28a02fd4fd1b3040","modified":1669344714894},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/mermaid.styl","hash":"e54378b88ce839626bdbcb00676d79dbe70a742c","modified":1669344714895},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/pie.styl","hash":"bce4029a87d60ba40ff4faadb9d95c76b824141a","modified":1669344714895},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/sequence.styl","hash":"7e91e07c39e1c1343626c8d5b9fecfebc6c086f6","modified":1669344714895},{"_id":"themes/shoka/source/css/_common/components/third-party/mermaid/state.styl","hash":"83d21d840bd2bc4249e2dced49efe8cef2281f05","modified":1669344714895},{"_id":"themes/shoka/source/images/alipay.png","hash":"98bb1a39ead9716e9f892cecc50e98153576682b","modified":1669619803312},{"_id":"themes/shoka/source/images/wechatpay.png","hash":"412723eee6f212276fa7b27c721264e78dd23647","modified":1669619803787},{"_id":"themes/shoka/example/source/assets/wallpaper-2572384.jpg","hash":"1df3620ab8c69fe2498a746f8ead057162df0637","modified":1669344714864},{"_id":"themes/shoka/screenshot.png","hash":"676ab8bfe3fa106e5b88617ab377cd6b438cc0d9","modified":1669344714881},{"_id":"themes/shoka/example/source/assets/wallpaper-878514.jpg","hash":"9f9705a377c42320b335b3c66b023e62b80e56e3","modified":1669344714868},{"_id":"themes/shoka/example/source/assets/wallpaper-2311325.jpg","hash":"ddaaaeb4fa04a05c83053c1f8149720d18c9c8de","modified":1669344714862},{"_id":"public/atom.xml","hash":"8047cf61ce5631e1cb5a3e89637711250755042d","modified":1669702561826},{"_id":"public/rss.xml","hash":"e8f3e20bf0dee29db341a3c5f8a994f5767dfc19","modified":1669702561826},{"_id":"public/feed.json","hash":"70281cfa572e3989762e4219b3daff97112de116","modified":1669702561826},{"_id":"public/月亮与六便士/index.html","hash":"a3daab16e18c76adc7e8f7802327f202dc9c5f9d","modified":1669702561826},{"_id":"public/tags/rtsp/index.html","hash":"0b26c4d3ab84c3e64cb2eb54aa3465cc82fef468","modified":1669702561826},{"_id":"public/tags/随笔/index.html","hash":"411e575484eee2802640e5053654fa6f80d846f1","modified":1669702561826},{"_id":"public/archives/index.html","hash":"609dbfdd0460e59f575ab3448a97a1647aed32e8","modified":1669702561826},{"_id":"public/archives/2022/index.html","hash":"7d8516834eded8aad3b71a1938831ce5a9880b43","modified":1669702561826},{"_id":"public/archives/2022/11/index.html","hash":"8d5cff644eda2ebf1ae0a2eb65bff348bcc35ba8","modified":1669702561826},{"_id":"public/index.html","hash":"f4faaf4a9bcb89c262097f61c88edcc5d6df7f75","modified":1669702561826},{"_id":"public/categories/index.html","hash":"4ddd7713c3c2ca31ca74c29a447381750a1ed09b","modified":1669702561826},{"_id":"public/tags/index.html","hash":"6d837d1d2b374bf0cece6f262306bc4166eff66a","modified":1669702561826},{"_id":"public/404.html","hash":"fd44ffa145b18da56177166b0565091463d50ed6","modified":1669702561826},{"_id":"public/js/app.js","hash":"f21b698fd354b32fdb0306da4a4a3858936d8563","modified":1669702561826},{"_id":"public/rtsp解析/index.html","hash":"0eb6431160c27988add076c7b7c9bb9d45d5d0dd","modified":1669702561826},{"_id":"public/images/apple-touch-icon.png","hash":"d4e5d65ff663cb71f43515e68d757cbae1ceb3ec","modified":1669702561826},{"_id":"public/images/404.png","hash":"b7b18f6689d0a14041d87bab6c4e4ce567249d01","modified":1669702561826},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1669702561826},{"_id":"public/images/avatar.jpg","hash":"93af0fd2ee6322c5c77760eefba6c81afa2e313e","modified":1669702561826},{"_id":"public/images/failure.ico","hash":"5eec5c163400d8ece74286da49130da1ead3f6f6","modified":1669702561826},{"_id":"public/images/favicon.ico","hash":"8ae48d9e33b7593cd005aae88b755aa9ce129f0e","modified":1669702561826},{"_id":"public/images/logo.svg","hash":"830dfbd6dff2986130819f747b25db230b05ca84","modified":1669702561826},{"_id":"public/images/play_disc.png","hash":"3cfa8dd2e12424c52d1f5e34e9502e446fecde9c","modified":1669702561826},{"_id":"public/images/search.png","hash":"08c4f6a7a92eff3548aec94b267a23a25e6bd215","modified":1669702561826},{"_id":"public/images/play_needle.png","hash":"e0998828ab50ce37617f9f4d46b74648206ac852","modified":1669702561826},{"_id":"public/rtsp解析/rtsp.png","hash":"533baa1c6c2a74f95bf656f7e810b9ce032c6736","modified":1669702561826},{"_id":"public/rtsp解析/setup.png","hash":"3513c0f9924740aab066ffbf7d19c638396acd32","modified":1669702561826},{"_id":"public/assets/algolia/algoliasearchLite.min.js","hash":"284416885e4e80e27fa4eae6fc305f4de15b914c","modified":1669702561826},{"_id":"public/images/alipay.png","hash":"98bb1a39ead9716e9f892cecc50e98153576682b","modified":1669702561826},{"_id":"public/assets/algolia/algoliasearchLite.js","hash":"e56ad6b82caf69066de545201014291fc961635e","modified":1669702561826},{"_id":"public/assets/algolia/algoliasearch.min.js","hash":"a3b131a9a47ccc16f4dd8988fabb6d306548db2f","modified":1669702561826},{"_id":"public/images/wechatpay.png","hash":"412723eee6f212276fa7b27c721264e78dd23647","modified":1669702561826},{"_id":"public/css/comment.css","hash":"0f37e32feddfce1d2a4553ac0e38117e60378120","modified":1669702561826},{"_id":"public/css/mermaid.css","hash":"ab88f68884d695edcdebe0160dbd0f936865820d","modified":1669702561826},{"_id":"public/css/app.css","hash":"e91ae406023e69a0ede457dd0f1d77623e57aa16","modified":1669702561826},{"_id":"public/assets/algolia/algoliasearch.js","hash":"6948fcdf071e4983e784e8c458cf201536f77792","modified":1669702561826}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"rtsp解析","date":"2022-11-28T06:24:56.000Z","_content":"\n###  `RTSP` 协议解析\n\n#### `RTSP`协议介绍\n\n* `RTSP`组合使用了可靠传输协议`TCP`和或高效传输协议`UDP`来串流内容给用户。它支持点播和直播服务。\n\n* `RTSP`协议本身并不负责数据传输，**通常(非必须)**是通过`RTP`配合`RTCP`完成数据流和控制命令的传输。\n\n#### `RTSP`协议方法\n\n`RTSP`中并没有连接的概念，而是通过会话`Session`进行管理。每个会话有对应的会话ID，会话中可能可能涉及一至多个流，会话生命周期中，客户端也可能切换连接（如`TCP`）来传递`RTSP`请求（`request`）。\n\n| method        | direction  | object | requirement             |\n| ------------- | ---------- | ------ | ----------------------- |\n| DESCRIBE      | C->S       | P,S    | recommended             |\n| ANNOUNCE      | C->S, S->C | P,S    | optional                |\n| GET_PARAMETER | C->S, S->C | P,S    | optional                |\n| OPTIONS       | C->S, S->C | P,S    | required(S->C:optional) |\n| PAUSE         | C->S       | P,S    | recommended             |\n| PLAY          | C->S       | P,S    | required                |\n| RECORD        | C->S       | P,S    | optional                |\n| REDIRECT      | S->C       | P,S    | optional                |\n| SETUP         | C->S       | S      | required                |\n| SET_PARAMETER | C->S,S->C  | P,S    | optional                |\n| TEARDOWN      | C->S       | P,S    | required                |\n\n![rtsp](rtsp.png)\n\n##### `RTSP`必选方法\n\n* +++info OPTIONS\n\n  用于请求服务器中所**支持**的所有**方法**\n\n  ```php\n  C->S    OPTIONS rtsp://video.foocorp.com:554 RTSP/1.0\n          CSeq: 1\n  \n  S->C    RTSP/1.0 200 OK\n          CSeq: 1\n          Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, RECORD\n  ```\n\n  +++\n\n* +++info DESCRIBE\n\n  用于请求`URL`指定对象的描述信息，通常描述信息使用`SDP`格式。\n\n  ```go\n  C->S  DESCRIBE rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 2\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 2\n        Content-Type: application/sdp\n        Content-Length: 210 \n  \n        m=video 0 RTP/AVP 96\n        a=control:streamid=0\n        a=range:npt=0-7.741000\n        a=length:npt=7.741000\n        a=rtpmap:96 MP4V-ES/5544\n        a=mimetype:string;\"video/MP4V-ES\"\n        a=AvgBitRate:integer;304018\n        a=StreamName:string;\"hinted video track\"\n        m=audio 0 RTP/AVP 97\n        a=control:streamid=1\n        a=range:npt=0-7.712000\n        a=length:npt=7.712000\n        a=rtpmap:97 mpeg4-generic/32000/2\n        a=mimetype:string;\"audio/mpeg4-generic\"\n        a=AvgBitRate:integer;65790\n        a=StreamName:string;\"hinted audio track\"\n  \n  ```\n\n  `SDP`协议格式\n   `SDP`是一个用来描述多媒体会话的应用层控制协议，是一个基于文本的协议，用于会话建立过程中的媒体类型和编码方案的协商等。`SDP`描述由许多文本行组成，文本行的格式为`<类型>=<值>`，`<类型>`是一个字母，`<值>`是结构化的文本串，其格式依`<类型>`而定。\n\n  ```xml\n  v=<version> (协议版本)\n  o=<username> <session id> <version> <network type> <address type> <address> (所有者/创建者和会话标识符)\n  s=<session name>    (会话名称)\n  i=<session description> (会话信息)\n  u=<URI> (URI 描述)\n  e=<email address> (Email 地址)\n  p=<phone number> (电话号码)\n  c=<network type> <address type> <connection address> (连接信息)\n  b=<modifier>:<bandwidth-value> (带宽信息)\n  t=<start time> <stop time> (会话活动时间)\n  r=<repeat interval> <active duration> <list of offsets from start-time>(0或多次重复次数)\n  z=<adjustment time> <offset> <adjustment time> <offset> ....\n  k=<method>\n  k=<method>:<encryption key> (加密密钥)\n  a=<attribute> (0 个或多个会话属性行)\n  a=<attribute>:<value>\n  m=<media> <port> <transport> <fmt list> (媒体名称和传输地址)\n  ```\n\n  +++\n\n* +++info SETUP\n\n  用于请求`URL`使用指定传输格式，必须在`PLAY`前发出。\n\n  ```php\n  C->S  SETUP rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 3\n        Transport: rtp/udp;unicast;client_port=5067-5068\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 3\n        Session: 12345678\n        Transport: rtp/udp;client_port=5067-5068;server_port=6023-6024\n  ```\n\n  客户端请求中，指明了用于接收`RTP`数据（音视频）的本地端口5067，以及`RTCP`数据（元信息）的端口5068。这里图示说明下`RTSP`（554/8554）、`RTP`、`RTCP`端口关系。\n\n  ![setup](setup.png)\n\n  可以看到，`RTCP`端口是基于`RTP`的，且始终为其端口值+1。服务器回复中，确认了客户端所请求的端口，并给出服务器端对应开辟的端口值6023/6024。\n\n  +++\n\n* +++info PLAY\n\n  用于请求服务器使用`SETUP`中确认的机制开始传输数据，客户端不应在`SETUP`请求未被确认应答成功前发出`PLAY`请求。另外需要注意，`PLAY`请求是需要排队的，其中可携带`Range`域以指明区间。\n\n  ```php\n  C->S  PLAY rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 4\n        Range: npt=5-20\n        Session: 12345678\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 4\n        Session: 12345678\n  ```\n\n  +++\n\n* +++info TEARDOWN\n\n  用于请求终止会话，将停止会话中所有相关流，并释放资源。\n\n  ```php\n  C->S  TEARDOWN rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 5\n        Session: 12345678\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 5\n  ```\n\n  +++\n\n1. `RTSP`可选方法\n","source":"_posts/rtsp解析.md","raw":"---\ntitle: rtsp解析\ndate: 2022-11-28 14:24:56\ntags: rtsp\n---\n\n###  `RTSP` 协议解析\n\n#### `RTSP`协议介绍\n\n* `RTSP`组合使用了可靠传输协议`TCP`和或高效传输协议`UDP`来串流内容给用户。它支持点播和直播服务。\n\n* `RTSP`协议本身并不负责数据传输，**通常(非必须)**是通过`RTP`配合`RTCP`完成数据流和控制命令的传输。\n\n#### `RTSP`协议方法\n\n`RTSP`中并没有连接的概念，而是通过会话`Session`进行管理。每个会话有对应的会话ID，会话中可能可能涉及一至多个流，会话生命周期中，客户端也可能切换连接（如`TCP`）来传递`RTSP`请求（`request`）。\n\n| method        | direction  | object | requirement             |\n| ------------- | ---------- | ------ | ----------------------- |\n| DESCRIBE      | C->S       | P,S    | recommended             |\n| ANNOUNCE      | C->S, S->C | P,S    | optional                |\n| GET_PARAMETER | C->S, S->C | P,S    | optional                |\n| OPTIONS       | C->S, S->C | P,S    | required(S->C:optional) |\n| PAUSE         | C->S       | P,S    | recommended             |\n| PLAY          | C->S       | P,S    | required                |\n| RECORD        | C->S       | P,S    | optional                |\n| REDIRECT      | S->C       | P,S    | optional                |\n| SETUP         | C->S       | S      | required                |\n| SET_PARAMETER | C->S,S->C  | P,S    | optional                |\n| TEARDOWN      | C->S       | P,S    | required                |\n\n![rtsp](rtsp.png)\n\n##### `RTSP`必选方法\n\n* +++info OPTIONS\n\n  用于请求服务器中所**支持**的所有**方法**\n\n  ```php\n  C->S    OPTIONS rtsp://video.foocorp.com:554 RTSP/1.0\n          CSeq: 1\n  \n  S->C    RTSP/1.0 200 OK\n          CSeq: 1\n          Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, RECORD\n  ```\n\n  +++\n\n* +++info DESCRIBE\n\n  用于请求`URL`指定对象的描述信息，通常描述信息使用`SDP`格式。\n\n  ```go\n  C->S  DESCRIBE rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 2\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 2\n        Content-Type: application/sdp\n        Content-Length: 210 \n  \n        m=video 0 RTP/AVP 96\n        a=control:streamid=0\n        a=range:npt=0-7.741000\n        a=length:npt=7.741000\n        a=rtpmap:96 MP4V-ES/5544\n        a=mimetype:string;\"video/MP4V-ES\"\n        a=AvgBitRate:integer;304018\n        a=StreamName:string;\"hinted video track\"\n        m=audio 0 RTP/AVP 97\n        a=control:streamid=1\n        a=range:npt=0-7.712000\n        a=length:npt=7.712000\n        a=rtpmap:97 mpeg4-generic/32000/2\n        a=mimetype:string;\"audio/mpeg4-generic\"\n        a=AvgBitRate:integer;65790\n        a=StreamName:string;\"hinted audio track\"\n  \n  ```\n\n  `SDP`协议格式\n   `SDP`是一个用来描述多媒体会话的应用层控制协议，是一个基于文本的协议，用于会话建立过程中的媒体类型和编码方案的协商等。`SDP`描述由许多文本行组成，文本行的格式为`<类型>=<值>`，`<类型>`是一个字母，`<值>`是结构化的文本串，其格式依`<类型>`而定。\n\n  ```xml\n  v=<version> (协议版本)\n  o=<username> <session id> <version> <network type> <address type> <address> (所有者/创建者和会话标识符)\n  s=<session name>    (会话名称)\n  i=<session description> (会话信息)\n  u=<URI> (URI 描述)\n  e=<email address> (Email 地址)\n  p=<phone number> (电话号码)\n  c=<network type> <address type> <connection address> (连接信息)\n  b=<modifier>:<bandwidth-value> (带宽信息)\n  t=<start time> <stop time> (会话活动时间)\n  r=<repeat interval> <active duration> <list of offsets from start-time>(0或多次重复次数)\n  z=<adjustment time> <offset> <adjustment time> <offset> ....\n  k=<method>\n  k=<method>:<encryption key> (加密密钥)\n  a=<attribute> (0 个或多个会话属性行)\n  a=<attribute>:<value>\n  m=<media> <port> <transport> <fmt list> (媒体名称和传输地址)\n  ```\n\n  +++\n\n* +++info SETUP\n\n  用于请求`URL`使用指定传输格式，必须在`PLAY`前发出。\n\n  ```php\n  C->S  SETUP rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 3\n        Transport: rtp/udp;unicast;client_port=5067-5068\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 3\n        Session: 12345678\n        Transport: rtp/udp;client_port=5067-5068;server_port=6023-6024\n  ```\n\n  客户端请求中，指明了用于接收`RTP`数据（音视频）的本地端口5067，以及`RTCP`数据（元信息）的端口5068。这里图示说明下`RTSP`（554/8554）、`RTP`、`RTCP`端口关系。\n\n  ![setup](setup.png)\n\n  可以看到，`RTCP`端口是基于`RTP`的，且始终为其端口值+1。服务器回复中，确认了客户端所请求的端口，并给出服务器端对应开辟的端口值6023/6024。\n\n  +++\n\n* +++info PLAY\n\n  用于请求服务器使用`SETUP`中确认的机制开始传输数据，客户端不应在`SETUP`请求未被确认应答成功前发出`PLAY`请求。另外需要注意，`PLAY`请求是需要排队的，其中可携带`Range`域以指明区间。\n\n  ```php\n  C->S  PLAY rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 4\n        Range: npt=5-20\n        Session: 12345678\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 4\n        Session: 12345678\n  ```\n\n  +++\n\n* +++info TEARDOWN\n\n  用于请求终止会话，将停止会话中所有相关流，并释放资源。\n\n  ```php\n  C->S  TEARDOWN rtsp://video.foocorp.com:554/streams/example.rm RTSP/1.0\n        CSeq: 5\n        Session: 12345678\n  \n  S->C  RTSP/1.0 200 OK\n        CSeq: 5\n  ```\n\n  +++\n\n1. `RTSP`可选方法\n","slug":"rtsp解析","published":1,"updated":"2022-11-28T06:41:42.768Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb1tsnda0000aws56z94326c","content":"<h3 id=\"rtsp-协议解析\"><a class=\"anchor\" href=\"#rtsp-协议解析\">#</a>  <code>RTSP</code>  协议解析</h3>\n<h4 id=\"rtsp协议介绍\"><a class=\"anchor\" href=\"#rtsp协议介绍\">#</a>  <code>RTSP</code>  协议介绍</h4>\n<ul>\n<li>\n<p><code>RTSP</code>  组合使用了可靠传输协议 <code>TCP</code>  和或高效传输协议 <code>UDP</code>  来串流内容给用户。它支持点播和直播服务。</p>\n</li>\n<li>\n<p><code>RTSP</code>  协议本身并不负责数据传输，** 通常 (非必须)** 是通过 <code>RTP</code>  配合 <code>RTCP</code>  完成数据流和控制命令的传输。</p>\n</li>\n</ul>\n<h4 id=\"rtsp协议方法\"><a class=\"anchor\" href=\"#rtsp协议方法\">#</a>  <code>RTSP</code>  协议方法</h4>\n<p><code>RTSP</code>  中并没有连接的概念，而是通过会话 <code>Session</code>  进行管理。每个会话有对应的会话 ID，会话中可能可能涉及一至多个流，会话生命周期中，客户端也可能切换连接（如 <code>TCP</code> ）来传递 <code>RTSP</code>  请求（ <code>request</code> ）。</p>\n<table>\n<thead>\n<tr>\n<th>method</th>\n<th>direction</th>\n<th>object</th>\n<th>requirement</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DESCRIBE</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>recommended</td>\n</tr>\n<tr>\n<td>ANNOUNCE</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>GET_PARAMETER</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>OPTIONS</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>required(S-&gt;C:optional)</td>\n</tr>\n<tr>\n<td>PAUSE</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>recommended</td>\n</tr>\n<tr>\n<td>PLAY</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>required</td>\n</tr>\n<tr>\n<td>RECORD</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>REDIRECT</td>\n<td>S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>SETUP</td>\n<td>C-&gt;S</td>\n<td>S</td>\n<td>required</td>\n</tr>\n<tr>\n<td>SET_PARAMETER</td>\n<td>C-&gt;S,S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>TEARDOWN</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>required</td>\n</tr>\n</tbody>\n</table>\n<p><img data-src=\"rtsp.png\" alt=\"rtsp\"></p>\n<h5 id=\"rtsp必选方法\"><a class=\"anchor\" href=\"#rtsp必选方法\">#</a>  <code>RTSP</code>  必选方法</h5>\n<ul>\n<li>\n<details class=\"info\"><summary>OPTIONS</summary><div>\n<p>用于请求服务器中所<strong>支持</strong>的所有<strong>方法</strong></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>    <span class=\"token constant\">OPTIONS</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554 RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>    <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">Public</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">DESCRIBE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SETUP</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">TEARDOWN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">PLAY</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">PAUSE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RECORD</span></pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>DESCRIBE</summary><div>\n<p>用于请求 <code>URL</code>  指定对象的描述信息，通常描述信息使用 <code>SDP</code>  格式。</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>C<span class=\"token operator\">-</span><span class=\"token operator\">></span>S  DESCRIBE rtsp<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>video<span class=\"token punctuation\">.</span>foocorp<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">:</span><span class=\"token number\">554</span><span class=\"token operator\">/</span>streams<span class=\"token operator\">/</span>example<span class=\"token punctuation\">.</span>rm RTSP<span class=\"token operator\">/</span><span class=\"token number\">1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>S<span class=\"token operator\">-</span><span class=\"token operator\">></span>C  RTSP<span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> OK</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      Content<span class=\"token operator\">-</span>Type<span class=\"token punctuation\">:</span> application<span class=\"token operator\">/</span>sdp</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      Content<span class=\"token operator\">-</span>Length<span class=\"token punctuation\">:</span> <span class=\"token number\">210</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      m<span class=\"token operator\">=</span>video <span class=\"token number\">0</span> RTP<span class=\"token operator\">/</span>AVP <span class=\"token number\">96</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      a<span class=\"token operator\">=</span>control<span class=\"token punctuation\">:</span>streamid<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      a<span class=\"token operator\">=</span><span class=\"token keyword\">range</span><span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">7.741000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      a<span class=\"token operator\">=</span>length<span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">7.741000</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      a<span class=\"token operator\">=</span>rtpmap<span class=\"token punctuation\">:</span><span class=\"token number\">96</span> MP4V<span class=\"token operator\">-</span>ES<span class=\"token operator\">/</span><span class=\"token number\">5544</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      a<span class=\"token operator\">=</span>mimetype<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"video/MP4V-ES\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      a<span class=\"token operator\">=</span>AvgBitRate<span class=\"token punctuation\">:</span>integer<span class=\"token punctuation\">;</span><span class=\"token number\">304018</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      a<span class=\"token operator\">=</span>StreamName<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"hinted video track\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      m<span class=\"token operator\">=</span>audio <span class=\"token number\">0</span> RTP<span class=\"token operator\">/</span>AVP <span class=\"token number\">97</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      a<span class=\"token operator\">=</span>control<span class=\"token punctuation\">:</span>streamid<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      a<span class=\"token operator\">=</span><span class=\"token keyword\">range</span><span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">7.712000</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      a<span class=\"token operator\">=</span>length<span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">7.712000</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      a<span class=\"token operator\">=</span>rtpmap<span class=\"token punctuation\">:</span><span class=\"token number\">97</span> mpeg4<span class=\"token operator\">-</span>generic<span class=\"token operator\">/</span><span class=\"token number\">32000</span><span class=\"token operator\">/</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      a<span class=\"token operator\">=</span>mimetype<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"audio/mpeg4-generic\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      a<span class=\"token operator\">=</span>AvgBitRate<span class=\"token punctuation\">:</span>integer<span class=\"token punctuation\">;</span><span class=\"token number\">65790</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      a<span class=\"token operator\">=</span>StreamName<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"hinted audio track\"</span></pre></td></tr></table></figure><p><code>SDP</code>  协议格式<br>\n <code>SDP</code>  是一个用来描述多媒体会话的应用层控制协议，是一个基于文本的协议，用于会话建立过程中的媒体类型和编码方案的协商等。 <code>SDP</code>  描述由许多文本行组成，文本行的格式为 <code>&lt;类型&gt;=&lt;值&gt;</code> ， <code>&lt;类型&gt;</code>  是一个字母， <code>&lt;值&gt;</code>  是结构化的文本串，其格式依 <code>&lt;类型&gt;</code>  而定。</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>v=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span> (协议版本)</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>o=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>username</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">id</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span><span class=\"token punctuation\">></span></span> (所有者/创建者和会话标识符)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">name</span><span class=\"token punctuation\">></span></span>    (会话名称)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>i=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">description</span><span class=\"token punctuation\">></span></span> (会话信息)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>u=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>URI</span><span class=\"token punctuation\">></span></span> (URI 描述)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>e=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>email</span> <span class=\"token attr-name\">address</span><span class=\"token punctuation\">></span></span> (Email 地址)</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>p=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>phone</span> <span class=\"token attr-name\">number</span><span class=\"token punctuation\">></span></span> (电话号码)</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>c=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>connection</span> <span class=\"token attr-name\">address</span><span class=\"token punctuation\">></span></span> (连接信息)</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>b=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modifier</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bandwidth-value</span><span class=\"token punctuation\">></span></span> (带宽信息)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>t=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>start</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>stop</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> (会话活动时间)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>r=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>repeat</span> <span class=\"token attr-name\">interval</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>active</span> <span class=\"token attr-name\">duration</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>list</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">offsets</span> <span class=\"token attr-name\">from</span> <span class=\"token attr-name\">start-time</span><span class=\"token punctuation\">></span></span>(0或多次重复次数)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>z=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>adjustment</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>offset</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>adjustment</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>offset</span><span class=\"token punctuation\">></span></span> ....</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>k=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>method</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>k=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>method</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encryption</span> <span class=\"token attr-name\">key</span><span class=\"token punctuation\">></span></span> (加密密钥)</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>a=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>attribute</span><span class=\"token punctuation\">></span></span> (0 个或多个会话属性行)</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>a=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>attribute</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>m=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>media</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transport</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fmt</span> <span class=\"token attr-name\">list</span><span class=\"token punctuation\">></span></span> (媒体名称和传输地址)</pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>SETUP</summary><div>\n<p>用于请求 <code>URL</code>  使用指定传输格式，必须在 <code>PLAY</code>  前发出。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">SETUP</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Transport<span class=\"token punctuation\">:</span> rtp<span class=\"token operator\">/</span>udp<span class=\"token punctuation\">;</span>unicast<span class=\"token punctuation\">;</span>client_port<span class=\"token operator\">=</span><span class=\"token number\">5067</span><span class=\"token operator\">-</span><span class=\"token number\">5068</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      Transport<span class=\"token punctuation\">:</span> rtp<span class=\"token operator\">/</span>udp<span class=\"token punctuation\">;</span>client_port<span class=\"token operator\">=</span><span class=\"token number\">5067</span><span class=\"token operator\">-</span><span class=\"token number\">5068</span><span class=\"token punctuation\">;</span>server_port<span class=\"token operator\">=</span><span class=\"token number\">6023</span><span class=\"token operator\">-</span><span class=\"token number\">6024</span></pre></td></tr></table></figure><p>客户端请求中，指明了用于接收 <code>RTP</code>  数据（音视频）的本地端口 5067，以及 <code>RTCP</code>  数据（元信息）的端口 5068。这里图示说明下 <code>RTSP</code> （554/8554）、 <code>RTP</code> 、 <code>RTCP</code>  端口关系。</p>\n<p><img data-src=\"setup.png\" alt=\"setup\"></p>\n<p>可以看到， <code>RTCP</code>  端口是基于 <code>RTP</code>  的，且始终为其端口值 + 1。服务器回复中，确认了客户端所请求的端口，并给出服务器端对应开辟的端口值 6023/6024。</p>\n</div></details>\n</li>\n<li>\n<details class=\"info\"><summary>PLAY</summary><div>\n<p>用于请求服务器使用 <code>SETUP</code>  中确认的机制开始传输数据，客户端不应在 <code>SETUP</code>  请求未被确认应答成功前发出 <code>PLAY</code>  请求。另外需要注意， <code>PLAY</code>  请求是需要排队的，其中可携带 <code>Range</code>  域以指明区间。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">PLAY</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Range<span class=\"token punctuation\">:</span> npt<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token operator\">-</span><span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>TEARDOWN</summary><div>\n<p>用于请求终止会话，将停止会话中所有相关流，并释放资源。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">TEARDOWN</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span></pre></td></tr></table></figure></div></details>\n</li>\n</ul>\n<ol>\n<li><code>RTSP</code>  可选方法</li>\n</ol>\n","site":{"data":{}},"length":3017,"excerpt":"","more":"<h3 id=\"rtsp-协议解析\"><a class=\"anchor\" href=\"#rtsp-协议解析\">#</a>  <code>RTSP</code>  协议解析</h3>\n<h4 id=\"rtsp协议介绍\"><a class=\"anchor\" href=\"#rtsp协议介绍\">#</a>  <code>RTSP</code>  协议介绍</h4>\n<ul>\n<li>\n<p><code>RTSP</code>  组合使用了可靠传输协议 <code>TCP</code>  和或高效传输协议 <code>UDP</code>  来串流内容给用户。它支持点播和直播服务。</p>\n</li>\n<li>\n<p><code>RTSP</code>  协议本身并不负责数据传输，** 通常 (非必须)** 是通过 <code>RTP</code>  配合 <code>RTCP</code>  完成数据流和控制命令的传输。</p>\n</li>\n</ul>\n<h4 id=\"rtsp协议方法\"><a class=\"anchor\" href=\"#rtsp协议方法\">#</a>  <code>RTSP</code>  协议方法</h4>\n<p><code>RTSP</code>  中并没有连接的概念，而是通过会话 <code>Session</code>  进行管理。每个会话有对应的会话 ID，会话中可能可能涉及一至多个流，会话生命周期中，客户端也可能切换连接（如 <code>TCP</code> ）来传递 <code>RTSP</code>  请求（ <code>request</code> ）。</p>\n<table>\n<thead>\n<tr>\n<th>method</th>\n<th>direction</th>\n<th>object</th>\n<th>requirement</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DESCRIBE</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>recommended</td>\n</tr>\n<tr>\n<td>ANNOUNCE</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>GET_PARAMETER</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>OPTIONS</td>\n<td>C-&gt;S, S-&gt;C</td>\n<td>P,S</td>\n<td>required(S-&gt;C:optional)</td>\n</tr>\n<tr>\n<td>PAUSE</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>recommended</td>\n</tr>\n<tr>\n<td>PLAY</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>required</td>\n</tr>\n<tr>\n<td>RECORD</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>REDIRECT</td>\n<td>S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>SETUP</td>\n<td>C-&gt;S</td>\n<td>S</td>\n<td>required</td>\n</tr>\n<tr>\n<td>SET_PARAMETER</td>\n<td>C-&gt;S,S-&gt;C</td>\n<td>P,S</td>\n<td>optional</td>\n</tr>\n<tr>\n<td>TEARDOWN</td>\n<td>C-&gt;S</td>\n<td>P,S</td>\n<td>required</td>\n</tr>\n</tbody>\n</table>\n<p><img data-src=\"rtsp.png\" alt=\"rtsp\"></p>\n<h5 id=\"rtsp必选方法\"><a class=\"anchor\" href=\"#rtsp必选方法\">#</a>  <code>RTSP</code>  必选方法</h5>\n<ul>\n<li>\n<details class=\"info\"><summary>OPTIONS</summary><div>\n<p>用于请求服务器中所<strong>支持</strong>的所有<strong>方法</strong></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>    <span class=\"token constant\">OPTIONS</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554 RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>    <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">Public</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">DESCRIBE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SETUP</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">TEARDOWN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">PLAY</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">PAUSE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">RECORD</span></pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>DESCRIBE</summary><div>\n<p>用于请求 <code>URL</code>  指定对象的描述信息，通常描述信息使用 <code>SDP</code>  格式。</p>\n<figure class=\"highlight go\"><figcaption data-lang=\"go\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>C<span class=\"token operator\">-</span><span class=\"token operator\">></span>S  DESCRIBE rtsp<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>video<span class=\"token punctuation\">.</span>foocorp<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">:</span><span class=\"token number\">554</span><span class=\"token operator\">/</span>streams<span class=\"token operator\">/</span>example<span class=\"token punctuation\">.</span>rm RTSP<span class=\"token operator\">/</span><span class=\"token number\">1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>S<span class=\"token operator\">-</span><span class=\"token operator\">></span>C  RTSP<span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> OK</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      Content<span class=\"token operator\">-</span>Type<span class=\"token punctuation\">:</span> application<span class=\"token operator\">/</span>sdp</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      Content<span class=\"token operator\">-</span>Length<span class=\"token punctuation\">:</span> <span class=\"token number\">210</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      m<span class=\"token operator\">=</span>video <span class=\"token number\">0</span> RTP<span class=\"token operator\">/</span>AVP <span class=\"token number\">96</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>      a<span class=\"token operator\">=</span>control<span class=\"token punctuation\">:</span>streamid<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      a<span class=\"token operator\">=</span><span class=\"token keyword\">range</span><span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">7.741000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      a<span class=\"token operator\">=</span>length<span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">7.741000</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      a<span class=\"token operator\">=</span>rtpmap<span class=\"token punctuation\">:</span><span class=\"token number\">96</span> MP4V<span class=\"token operator\">-</span>ES<span class=\"token operator\">/</span><span class=\"token number\">5544</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      a<span class=\"token operator\">=</span>mimetype<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"video/MP4V-ES\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      a<span class=\"token operator\">=</span>AvgBitRate<span class=\"token punctuation\">:</span>integer<span class=\"token punctuation\">;</span><span class=\"token number\">304018</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      a<span class=\"token operator\">=</span>StreamName<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"hinted video track\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      m<span class=\"token operator\">=</span>audio <span class=\"token number\">0</span> RTP<span class=\"token operator\">/</span>AVP <span class=\"token number\">97</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      a<span class=\"token operator\">=</span>control<span class=\"token punctuation\">:</span>streamid<span class=\"token operator\">=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      a<span class=\"token operator\">=</span><span class=\"token keyword\">range</span><span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token operator\">-</span><span class=\"token number\">7.712000</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      a<span class=\"token operator\">=</span>length<span class=\"token punctuation\">:</span>npt<span class=\"token operator\">=</span><span class=\"token number\">7.712000</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      a<span class=\"token operator\">=</span>rtpmap<span class=\"token punctuation\">:</span><span class=\"token number\">97</span> mpeg4<span class=\"token operator\">-</span>generic<span class=\"token operator\">/</span><span class=\"token number\">32000</span><span class=\"token operator\">/</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      a<span class=\"token operator\">=</span>mimetype<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"audio/mpeg4-generic\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      a<span class=\"token operator\">=</span>AvgBitRate<span class=\"token punctuation\">:</span>integer<span class=\"token punctuation\">;</span><span class=\"token number\">65790</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      a<span class=\"token operator\">=</span>StreamName<span class=\"token punctuation\">:</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span><span class=\"token string\">\"hinted audio track\"</span></pre></td></tr></table></figure><p><code>SDP</code>  协议格式<br>\n <code>SDP</code>  是一个用来描述多媒体会话的应用层控制协议，是一个基于文本的协议，用于会话建立过程中的媒体类型和编码方案的协商等。 <code>SDP</code>  描述由许多文本行组成，文本行的格式为 <code>&lt;类型&gt;=&lt;值&gt;</code> ， <code>&lt;类型&gt;</code>  是一个字母， <code>&lt;值&gt;</code>  是结构化的文本串，其格式依 <code>&lt;类型&gt;</code>  而定。</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>v=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span> (协议版本)</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>o=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>username</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">id</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span><span class=\"token punctuation\">></span></span> (所有者/创建者和会话标识符)</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">name</span><span class=\"token punctuation\">></span></span>    (会话名称)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>i=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>session</span> <span class=\"token attr-name\">description</span><span class=\"token punctuation\">></span></span> (会话信息)</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>u=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>URI</span><span class=\"token punctuation\">></span></span> (URI 描述)</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>e=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>email</span> <span class=\"token attr-name\">address</span><span class=\"token punctuation\">></span></span> (Email 地址)</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>p=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>phone</span> <span class=\"token attr-name\">number</span><span class=\"token punctuation\">></span></span> (电话号码)</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>c=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">type</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>connection</span> <span class=\"token attr-name\">address</span><span class=\"token punctuation\">></span></span> (连接信息)</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>b=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modifier</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bandwidth-value</span><span class=\"token punctuation\">></span></span> (带宽信息)</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>t=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>start</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>stop</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> (会话活动时间)</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>r=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>repeat</span> <span class=\"token attr-name\">interval</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>active</span> <span class=\"token attr-name\">duration</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>list</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">offsets</span> <span class=\"token attr-name\">from</span> <span class=\"token attr-name\">start-time</span><span class=\"token punctuation\">></span></span>(0或多次重复次数)</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>z=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>adjustment</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>offset</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>adjustment</span> <span class=\"token attr-name\">time</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>offset</span><span class=\"token punctuation\">></span></span> ....</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>k=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>method</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>k=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>method</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encryption</span> <span class=\"token attr-name\">key</span><span class=\"token punctuation\">></span></span> (加密密钥)</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>a=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>attribute</span><span class=\"token punctuation\">></span></span> (0 个或多个会话属性行)</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>a=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>attribute</span><span class=\"token punctuation\">></span></span>:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>value</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>m=<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>media</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>port</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transport</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fmt</span> <span class=\"token attr-name\">list</span><span class=\"token punctuation\">></span></span> (媒体名称和传输地址)</pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>SETUP</summary><div>\n<p>用于请求 <code>URL</code>  使用指定传输格式，必须在 <code>PLAY</code>  前发出。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">SETUP</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Transport<span class=\"token punctuation\">:</span> rtp<span class=\"token operator\">/</span>udp<span class=\"token punctuation\">;</span>unicast<span class=\"token punctuation\">;</span>client_port<span class=\"token operator\">=</span><span class=\"token number\">5067</span><span class=\"token operator\">-</span><span class=\"token number\">5068</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      Transport<span class=\"token punctuation\">:</span> rtp<span class=\"token operator\">/</span>udp<span class=\"token punctuation\">;</span>client_port<span class=\"token operator\">=</span><span class=\"token number\">5067</span><span class=\"token operator\">-</span><span class=\"token number\">5068</span><span class=\"token punctuation\">;</span>server_port<span class=\"token operator\">=</span><span class=\"token number\">6023</span><span class=\"token operator\">-</span><span class=\"token number\">6024</span></pre></td></tr></table></figure><p>客户端请求中，指明了用于接收 <code>RTP</code>  数据（音视频）的本地端口 5067，以及 <code>RTCP</code>  数据（元信息）的端口 5068。这里图示说明下 <code>RTSP</code> （554/8554）、 <code>RTP</code> 、 <code>RTCP</code>  端口关系。</p>\n<p><img data-src=\"setup.png\" alt=\"setup\"></p>\n<p>可以看到， <code>RTCP</code>  端口是基于 <code>RTP</code>  的，且始终为其端口值 + 1。服务器回复中，确认了客户端所请求的端口，并给出服务器端对应开辟的端口值 6023/6024。</p>\n</div></details>\n</li>\n<li>\n<details class=\"info\"><summary>PLAY</summary><div>\n<p>用于请求服务器使用 <code>SETUP</code>  中确认的机制开始传输数据，客户端不应在 <code>SETUP</code>  请求未被确认应答成功前发出 <code>PLAY</code>  请求。另外需要注意， <code>PLAY</code>  请求是需要排队的，其中可携带 <code>Range</code>  域以指明区间。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">PLAY</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Range<span class=\"token punctuation\">:</span> npt<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token operator\">-</span><span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr></table></figure></div></details>\n</li>\n<li>\n<details class=\"info\"><summary>TEARDOWN</summary><div>\n<p>用于请求终止会话，将停止会话中所有相关流，并释放资源。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token constant\">C</span><span class=\"token operator\">-></span><span class=\"token constant\">S</span>  <span class=\"token constant\">TEARDOWN</span> rtsp<span class=\"token punctuation\">:</span><span class=\"token comment\">//video.foocorp.com:554/streams/example.rm RTSP/1.0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      Session<span class=\"token punctuation\">:</span> <span class=\"token number\">12345678</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token constant\">S</span><span class=\"token operator\">-></span><span class=\"token constant\">C</span>  <span class=\"token constant\">RTSP</span><span class=\"token operator\">/</span><span class=\"token number\">1.0</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      CSeq<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span></pre></td></tr></table></figure></div></details>\n</li>\n</ul>\n<ol>\n<li><code>RTSP</code>  可选方法</li>\n</ol>\n"},{"title":"月亮与六便士","date":"2022-11-25T01:11:49.000Z","_content":"\n### 月亮与六便士\n\n我们身边有许多人只能埋头拾起地上的六便士，偶尔望望月亮，而不能追逐月亮，无论选择如何，愿我们都能拾起地上的六便士，同时也能追逐自己心中的月亮，不在乎世俗的眼光，勇敢`努力追逐自己的🌙。\n\n### `hello world`\n\n```c\n#include <iostream>\nusing namespace std;\n \nint main() \n{\n    cout << \"Hello, World!\";\n    return 0;\n}\n```\n\n","source":"_posts/月亮与六便士.md","raw":"---\ntitle: 月亮与六便士\ndate: 2022-11-25 09:11:49\ntags: 随笔\n\n---\n\n### 月亮与六便士\n\n我们身边有许多人只能埋头拾起地上的六便士，偶尔望望月亮，而不能追逐月亮，无论选择如何，愿我们都能拾起地上的六便士，同时也能追逐自己心中的月亮，不在乎世俗的眼光，勇敢`努力追逐自己的🌙。\n\n### `hello world`\n\n```c\n#include <iostream>\nusing namespace std;\n \nint main() \n{\n    cout << \"Hello, World!\";\n    return 0;\n}\n```\n\n","slug":"月亮与六便士","published":1,"updated":"2022-11-25T03:08:39.739Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clb1tsndh0001aws5ae9e235d","content":"<h3 id=\"月亮与六便士\"><a class=\"anchor\" href=\"#月亮与六便士\">#</a> 月亮与六便士</h3>\n<p>我们身边有许多人只能埋头拾起地上的六便士，偶尔望望月亮，而不能追逐月亮，无论选择如何，愿我们都能拾起地上的六便士，同时也能追逐自己心中的月亮，不在乎世俗的眼光，勇敢 ` 努力追逐自己的🌙。</p>\n<h3 id=\"hello-world\"><a class=\"anchor\" href=\"#hello-world\">#</a>  <code>hello world</code></h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>using namespace std<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>","site":{"data":{}},"length":206,"excerpt":"","more":"<h3 id=\"月亮与六便士\"><a class=\"anchor\" href=\"#月亮与六便士\">#</a> 月亮与六便士</h3>\n<p>我们身边有许多人只能埋头拾起地上的六便士，偶尔望望月亮，而不能追逐月亮，无论选择如何，愿我们都能拾起地上的六便士，同时也能追逐自己心中的月亮，不在乎世俗的眼光，勇敢 ` 努力追逐自己的🌙。</p>\n<h3 id=\"hello-world\"><a class=\"anchor\" href=\"#hello-world\">#</a>  <code>hello world</code></h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>using namespace std<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"Hello, World!\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>"}],"PostAsset":[{"_id":"source/_posts/rtsp解析/rtsp.png","slug":"rtsp.png","post":"clb1tsnda0000aws56z94326c","modified":0,"renderable":0},{"_id":"source/_posts/rtsp解析/setup.png","slug":"setup.png","post":"clb1tsnda0000aws56z94326c","modified":0,"renderable":0}],"PostCategory":[],"PostTag":[{"post_id":"clb1tsnda0000aws56z94326c","tag_id":"clb1tsndj0002aws54or9cbvq","_id":"clb1tsndo0004aws5dzga83gy"},{"post_id":"clb1tsndh0001aws5ae9e235d","tag_id":"clb1tsndn0003aws5a8t47crm","_id":"clb1tsndp0005aws51t6wfr2n"}],"Tag":[{"name":"rtsp","_id":"clb1tsndj0002aws54or9cbvq"},{"name":"随笔","_id":"clb1tsndn0003aws5a8t47crm"}]}}